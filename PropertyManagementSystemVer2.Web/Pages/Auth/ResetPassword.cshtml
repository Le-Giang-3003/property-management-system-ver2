@* File: Pages/Auth/ResetPassword.cshtml *@
@page
@model PropertyManagementSystemVer2.Web.Pages.Auth.ResetPasswordModel
@{
    ViewData["Title"] = "Đặt lại mật khẩu";
    Layout = "_AuthLayout";
}

<div class="row justify-content-center">
    <div class="col-md-6 col-lg-5 col-xl-4">
        <div class="auth-card">
            <div class="text-center mb-4">
                <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex p-3 mb-3">
                    <i class="bi bi-shield-lock fs-2 text-success"></i>
                </div>
                <h4 class="fw-bold">Đặt lại mật khẩu</h4>
                <p class="text-muted">Nhập mã OTP và mật khẩu mới</p>
            </div>

            <form method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                <!-- OTP -->
                <div class="mb-3">
                    <label asp-for="Input.Token" class="form-label">Mã OTP</label>
                    <div class="input-icon-wrapper">
                        <i class="bi bi-123 input-icon"></i>
                        <input asp-for="Input.Token" class="form-control text-center fs-5 letter-spacing-2"
                               placeholder="000000" maxlength="6" style="letter-spacing: 0.5em;" />
                    </div>
                    <span asp-validation-for="Input.Token" class="text-danger small"></span>
                    <small class="text-muted">Mã có hiệu lực 30 phút, chỉ dùng 1 lần</small>
                </div>

                <!-- New Password -->
                <div class="mb-3">
                    <label asp-for="Input.NewPassword" class="form-label">Mật khẩu mới</label>
                    <div class="input-icon-wrapper">
                        <i class="bi bi-lock input-icon"></i>
                        <input asp-for="Input.NewPassword" class="form-control" type="password" placeholder="••••••••"
                               oninput="checkPasswordStrength(this.value)" autocomplete="new-password" />
                        <button type="button" class="password-toggle"><i class="bi bi-eye"></i></button>
                    </div>
                    <span asp-validation-for="Input.NewPassword" class="text-danger small"></span>
                    <div class="password-strength">
                        <div id="passwordStrengthBar" class="password-strength-bar"></div>
                    </div>
                    <small id="passwordStrengthText" class="text-muted"></small>
                </div>

                <!-- Confirm -->
                <div class="mb-4">
                    <label asp-for="Input.ConfirmPassword" class="form-label">Xác nhận mật khẩu mới</label>
                    <div class="input-icon-wrapper">
                        <i class="bi bi-lock-fill input-icon"></i>
                        <input asp-for="Input.ConfirmPassword" class="form-control" type="password" placeholder="••••••••" />
                    </div>
                    <span asp-validation-for="Input.ConfirmPassword" class="text-danger small"></span>
                </div>

                <button type="submit" class="btn btn-success w-100 mb-3">
                    <i class="bi bi-check-lg me-2"></i>Đặt lại mật khẩu
                </button>

                <p class="text-center">
                    <a asp-page="/Auth/ForgotPassword" class="text-decoration-none">
                        Gửi lại mã OTP
                    </a>
                </p>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}